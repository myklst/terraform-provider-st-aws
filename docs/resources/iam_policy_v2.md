---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "st-aws_iam_policy_v2 Resource - st-aws"
subcategory: ""
description: |-
  Provides an IAM Policy resource that manages policy content exceeding character limits by splitting it into smaller segments. These segments are combined to form a complete policy and can be attached to a specified target if provided. Policies like ReadOnlyAccess that exceed the maximum length are attached directly.
---

# st-aws_iam_policy_v2 (Resource)

Provides an IAM Policy resource that manages policy content exceeding character limits by splitting it into smaller segments. These segments are combined to form a complete policy and can be attached to a specified target if provided. Policies like `ReadOnlyAccess` that exceed the maximum length are attached directly.

~> **NOTE:** This resource conflicts with `st-aws_iam_permission_set_attachment` resource when the `permission_set`, `user`, or `role` parameters are set in this resource.

## Example Usage

```terraform
####################################
# Permission Set
####################################
resource "st-aws_iam_policy_v2" "permission_set" {
  permission_set {
    permission_set_name = "example-policy"
    instance_arn        = "ssoins-xxxxxxxxxxxxxx"
    permission_set_arn  = "arn:aws:sso:::permissionSet/ssoins-xxxxxxxxxxxxxx/ps-xxxxxxxxxxxxx"
  }

  attached_policies = [
    "AWSSupportAccess",
    "PowerUserAccess",
    "AWSBillingReadOnlyAccess",
    "ReadOnlyAccess",
  ]
}

####################################
# Role
####################################
resource "st-aws_iam_policy_v2" "role" {
  role {
    role_name = "example-role"
  }

  attached_policies = [
    "AWSSupportAccess",
    "PowerUserAccess",
    "AWSBillingReadOnlyAccess",
    "ReadOnlyAccess",
  ]
}


####################################
# User
####################################
resource "st-aws_iam_policy_v2" "User" {
  user {
    user_name = "example-user"
  }

  attached_policies = [
    "AWSSupportAccess",
    "PowerUserAccess",
    "AWSBillingReadOnlyAccess",
    "ReadOnlyAccess",
  ]
}

####################################
# Create Policy Only
####################################
resource "st-aws_iam_policy_v2" "Create_Policy_Only" {
  policy_name = "test"

  attached_policies = [
    "AWSSupportAccess",
    "PowerUserAccess",
    "AWSBillingReadOnlyAccess",
    "ReadOnlyAccess",
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `attached_policies` (List of String) List of IAM policy.

### Optional

- `permission_set` (Block, Optional) Attach to an Identity Center Permission Set. Mutually exclusive with `role` and `user`. (see [below for nested schema](#nestedblock--permission_set))
- `policy_name` (String) The policy name.
- `role` (Block, Optional) Attach to an IAM Role. Mutually exclusive with `user` and `permission_set`. (see [below for nested schema](#nestedblock--role))
- `user` (Block, Optional) Attach to an IAM User. Mutually exclusive with `role` and `permission_set`. (see [below for nested schema](#nestedblock--user))

### Read-Only

- `attached_policies_detail` (Attributes List) A list of policies detail. (see [below for nested schema](#nestedatt--attached_policies_detail))
- `aws_managed_policies` (Attributes List) A list of combined policies that are attached to targets. (see [below for nested schema](#nestedatt--aws_managed_policies))
- `combined_policies_detail` (Attributes List) A list of combined policies that are attached to targets. (see [below for nested schema](#nestedatt--combined_policies_detail))
- `customer_managed_policies` (Attributes List) A list of combined policies that are attached to targets. (see [below for nested schema](#nestedatt--customer_managed_policies))

<a id="nestedblock--permission_set"></a>
### Nested Schema for `permission_set`

Optional:

- `instance_arn` (String) Identity Center Instance ARN.
- `permission_set_arn` (String) Target Permission Set ARN.
- `permission_set_name` (String) Logical name for the combined policy attached to the Permission Set.
- `policy_path` (String) Policy path for customer-managed policy references.


<a id="nestedblock--role"></a>
### Nested Schema for `role`

Optional:

- `role_name` (String) Target IAM Role name.


<a id="nestedblock--user"></a>
### Nested Schema for `user`

Optional:

- `user_name` (String) Target IAM User name.


<a id="nestedatt--attached_policies_detail"></a>
### Nested Schema for `attached_policies_detail`

Read-Only:

- `policy_document` (String) The policy document of the IAM policy.
- `policy_name` (String) The policy name.


<a id="nestedatt--aws_managed_policies"></a>
### Nested Schema for `aws_managed_policies`

Read-Only:

- `policy_document` (String) The policy document of the IAM policy.
- `policy_name` (String) The policy name.


<a id="nestedatt--combined_policies_detail"></a>
### Nested Schema for `combined_policies_detail`

Read-Only:

- `policy_document` (String) The policy document of the IAM policy.
- `policy_name` (String) The policy name.


<a id="nestedatt--customer_managed_policies"></a>
### Nested Schema for `customer_managed_policies`

Read-Only:

- `policy_document` (String) The policy document of the IAM policy.
- `policy_name` (String) The policy name.
